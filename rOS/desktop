os.pullEvent = os.pullEventRaw

function drawIcons()
  icon = paintutils.loadImage("rPaints/icon")
  paintutils.drawImage(icon, 2, 2)
  term.setCursorPos(2,2)
  print(">_")
end

function drawTaskbar()
  paintutils.drawLine(1, 19, 51, 19, colors.cyan)
  paintutils.drawPixel(1, 19, colors.blue)
end

function drawStartMenu()
  sm = paintutils.loadImage("rPaints/startMenu")
  paintutils.drawImage(sm, 1, 1)
  term.setCursorPos(1, 18)
  write("Shutdown")
  term.setCursorPos(1, 17)
  write("Reboot")
  term.setCursorPos(1, 16)
  write("Install")
end

function open(program)
  multishell.launch({}, program)
  shell.run("rOS/desktop")
end

term.setTextColor(colors.black)
term.setBackgroundColor(colors.lightBlue)
term.clear()
term.setCursorPos(1,1)

drawTaskbar()
drawIcons()
 
event, button, x, y = os.pullEvent("mouse_click")
  
if button == 1 and x == 1 and y == 19 then
  drawStartMenu()
  sleep(0.1)
  
  event, button, x, y = os.pullEvent("mouse_click")
      
  if x >= 1 and x <= 8 and y == 18 then
    os.shutdown()
  elseif x >= 1 and x <= 6 and y == 17 then
    os.reboot()
  elseif x <= 7 and y == 16 then
    shell.run("rPrograms/installer")
  else
    shell.run("rOS/desktop")
   end
elseif button == 1 and x >= 2 and x <= 4 and y >= 2 and y <= 4 then
  shell.run("rPrograms/console")
else
  shell.run("rOS/desktop")
end

